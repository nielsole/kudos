KudosPlease=function(){var t=!!document.documentElement.classList,e=function(e,n){return t?function(t,n){if(""!=n)return t.classList[e](n)}:n},n=e("add",(function(t,e){e=e.split(",");for(var n=0;n<e.length;n++)-1==t.className.indexOf(e[n])&&(t.className=t.className.trim()+" "+e[n])})),a=e("remove",(function(t,e){e=e.split(",");for(var n=0;n<e.length;n++)t.className=t.className.replace(e[n],"").trim()})),s=e("contains",(function(t,e){for(var n=t.className.split(" "),a=!1,s=0;s<n.length;s++)n[s]==e&&(a=!0);return a})),i=function(t,e,s){null!=s.status&&(null!=t.getAttribute("data-status")&&a(t,s.status[t.getAttribute("data-status")]),n(t,s.status[e]),t.setAttribute("data-status",e))},u=function(t,e,a){n(t,"finish"),i(t,"gamma",a),e=e||!1,amount=d(parseInt(t.getAttribute("data-id"),10),a),e&&(++amount,m(t,"POST",a))},r=function(t,e,i){var r=-1;s(e,"finish")||(n(e,"active"),r=setTimeout((function(){a(e,"active"),u(e,!0,i)}),i.duration),i.timer[e.getAttribute("data-id")]=r)},o=function(t,e,n){1===t.touches.length&&(t.stopPropagation(),t.preventDefault(),r(0,e,n))},l=function(t,e,n){s(e,"finish")||(a(e,"active"),clearTimeout(n.timer[e.getAttribute("data-id")]))},c=function(t,e,n,a){try{t.addEventListener(e,(function(e){n(e,t,a)}),!1)}catch(s){t.attachEvent("on"+e,(function(e){n(e,t,a)}))}},d=function(t,e){var n=e.elements[t].getAttribute("data-amount")||0;return e.persistent&&null!=(amount=window.localStorage.getItem("kudos:saved:"+e.elements[t].getAttribute("data-url")))&&(n=amount),n},m=function(t,e,n){var a;try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){a=new XMLHttpRequest}a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var s=a.responseText;t.setAttribute("data-amount",s),"GET"==e&&(i(t,0==s?"alpha":"beta",n),n.persistent&&null!=window.localStorage.getItem("kudos:saved:"+t.getAttribute("data-url"))&&i(t,"gamma",n)),"POST"==e&&function(t,e,n){n.persistent&&window.localStorage.setItem("kudos:saved:"+t.getAttribute("data-url"),e)}(t,s,n)}};var s="?url="+encodeURIComponent(t.getAttribute("data-url"));a.open(e,"https://kudos.niels-ole.com/"+s,!0),a.send()};return"".trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),function(t){this.elements=document.querySelectorAll(t.el),this.status=t.status,this.persistent=null==t.persistent||t.persistent&&null!=window.localStorage,this.duration=t.duration,this.timer={};for(var e=0;e<this.elements.length;e++){var n=this.elements[e];n.setAttribute("data-id",e),m(n,"GET",this),0==d(e,this)?(n.setAttribute("data-amount",0),this.timer[e]=-1,c(n,"touchstart",o,this),c(n,"touchend",l,this),c(n,"mouseover",r,this),c(n,"mouseout",l,this)):u(n,!1,this)}return this}}();
